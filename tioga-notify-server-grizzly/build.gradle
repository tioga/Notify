project(":tioga-notify-server-grizzly") {

  version = "1.0.1"

  dependencies {
    compile(project(":tioga-notify-engine"))

    compile(project(":tioga-notify-processor-push"))
    compile(project(":tioga-notify-processor-swing"))
    compile(project(":tioga-notify-processor-smtp"))
    compile(project(":tioga-notify-processor-logger"))
    compile(project(":tioga-notify-processor-slack"))

    compile("org.tiogasolutions.runners:tioga-runners-jersey-spring:1.+")
  }

  jar {
    // Remove version from the jar name to help with deployment.
    archiveName = "tioga-notify-server-grizzly.jar"
  }

  apply plugin:'distribution'

  artifacts {
    archives distZip
  }

  distributions {
    main {
      contents {
        into("runtime") {
          from {"../runtime"}
        }
        into("tioga-notify-admin-app") {
          from {"../tioga-notify-admin-app"}
        }
        into("lib") {
          from(jar)
          from(project.configurations.runtime)
        }
      }
    }
  }

  jar {
    manifest {
      attributes(
        "Implementation-Version" : "0.1",
        "Main-Class"             : "org.tiogasolutions.notify.server.grizzly.NotifyServer",
        "Class-Path"             : configurations.compile.collect { it.getName() }.join(' ')
      )
    }
  }

  apply(from: urlCache.get("https://raw.githubusercontent.com/tioga/build-scripts/master/build-config-deployer.gradle"))
}
